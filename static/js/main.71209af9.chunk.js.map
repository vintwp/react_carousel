{"version":3,"sources":["components/CarouselList/CarouselList.tsx","components/Carousel/Carousel.tsx","App.tsx","index.tsx"],"names":["CarouselList","images","itemWidth","style","transform","transition","className","map","image","index","width","src","alt","String","Math","random","Carousel","state","props","frameSize","step","animationDuration","offset","infinite","handleNextClick","maxOffset","length","currentoffset","setState","max","abs","setTimeout","handlePrevClick","currentOffset","offsetBySlide","min","lastPositionRealSlide","addCloneSlidesForInfinitySlider","imagesFromServer","imagesWithClones","push","slice","unshift","updateSlidesList","isInfinite","this","widthContainer","type","onClick","disabled","htmlFor","id","defaultValue","onChange","e","target","value","defaultChecked","checked","Component","App","React","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.71209af9.chunk.js","sourcesContent":["import React from 'react';\nimport './CarouselList.scss';\n\ntype Props = {\n  images: string[];\n  itemWidth: number;\n  style: {\n    transform: string,\n    transition: string,\n  }\n};\n\nexport const CarouselList: React.FC<Props> = ({\n  images,\n  itemWidth,\n  style: {\n    transform,\n    transition,\n  },\n}) => (\n  <ul\n    className=\"Carousel__list\"\n    style={{\n      transform: `${transform}`,\n      transition: `${transition}`,\n    }}\n  >\n    {images.map((image, index) => (\n      <li\n        key={`${image}+${Math.random()}}`}\n        className=\"Carousel__item\"\n        style={{\n          width: `${itemWidth}px`,\n        }}\n      >\n        <img\n          src={image}\n          alt={String(index + 1)}\n          width={itemWidth}\n        />\n      </li>\n    ))}\n  </ul>\n);\n","import { Component } from 'react';\nimport { CarouselList } from '../CarouselList';\nimport './Carousel.scss';\n\ntype Props = {\n  images: string[];\n  itemWidth: number;\n  frameSize: number;\n  step: number;\n  animationDuration: number;\n  infinite: boolean;\n};\n\ntype State = {\n  images: string[];\n  offset: number;\n  itemWidth: number;\n  frameSize: number;\n  step: number;\n  animationDuration: number;\n  infinite: boolean;\n};\n\nexport class Carousel extends Component<Props, State> {\n  state: Readonly<State> = {\n    images: this.props.images,\n    itemWidth: this.props.itemWidth,\n    frameSize: this.props.frameSize,\n    step: this.props.step,\n    animationDuration: this.props.animationDuration,\n    offset: 0,\n    infinite: this.props.infinite,\n\n  };\n\n  componentDidMount(): void {\n    const { infinite } = this.props;\n\n    if (infinite) {\n      this.addCloneSlidesForInfinitySlider();\n    }\n  }\n\n  handleNextClick = (): void => {\n    const {\n      images,\n      offset,\n      infinite,\n      itemWidth,\n      step,\n      animationDuration,\n\n    } = this.state;\n    const maxOffset = !infinite\n      ? -((images.length - step) * itemWidth)\n      : -((images.length - 2 * step) * itemWidth);\n    const currentoffset = offset - step * itemWidth;\n\n    if (!infinite) {\n      this.setState({\n        offset: Math.max(maxOffset, currentoffset),\n      });\n    }\n\n    if (infinite) {\n      this.setState({\n        offset: currentoffset,\n      });\n\n      if (Math.abs(currentoffset) > Math.abs(maxOffset)) {\n        setTimeout(() => {\n          this.setState({\n            animationDuration: 0,\n            offset: (currentoffset - maxOffset),\n          }, () => {\n            setTimeout(() => {\n              this.setState({ animationDuration });\n            }, animationDuration);\n          });\n        }, animationDuration);\n      }\n    }\n  };\n\n  handlePrevClick = (): void => {\n    const {\n      offset,\n      images, itemWidth,\n      step,\n      animationDuration,\n      infinite,\n    } = this.state;\n    const currentOffset = offset + step * itemWidth;\n    const offsetBySlide = step * itemWidth;\n\n    if (!infinite) {\n      this.setState({\n        offset: Math.min(0, currentOffset),\n      });\n    }\n\n    if (infinite) {\n      const lastPositionRealSlide = -(images.length - 2 * step) * itemWidth;\n\n      if (currentOffset === 0) {\n        this.setState({\n          offset: Math.min(0, currentOffset),\n        });\n        setTimeout(() => {\n          this.setState({\n            animationDuration: 0,\n            offset: (lastPositionRealSlide),\n          }, () => {\n            setTimeout(() => {\n              this.setState({ animationDuration });\n            }, animationDuration);\n          });\n        }, animationDuration);\n\n        return;\n      }\n\n      if (Math.abs(offset) - offsetBySlide < offsetBySlide) {\n        this.setState({\n          offset: currentOffset,\n        });\n\n        setTimeout(() => {\n          this.setState({\n            animationDuration: 0,\n            offset: lastPositionRealSlide + currentOffset,\n          }, () => {\n            setTimeout(() => {\n              this.setState({ animationDuration });\n            }, animationDuration);\n          });\n        }, animationDuration);\n\n        return;\n      }\n\n      this.setState({\n        offset: currentOffset,\n      });\n    }\n  };\n\n  addCloneSlidesForInfinitySlider = () => {\n    const imagesFromServer = this.props.images;\n    const { step, itemWidth } = this.props;\n\n    const imagesWithClones = [...this.props.images];\n\n    imagesWithClones.push(...imagesFromServer.slice(0, step));\n    imagesWithClones.unshift(...imagesFromServer.slice(-step));\n\n    this.setState({\n      offset: -(itemWidth * step),\n      images: [...imagesWithClones],\n    });\n  };\n\n  updateSlidesList = (isInfinite: boolean): void => {\n    const { images } = this.props;\n\n    if (isInfinite) {\n      this.addCloneSlidesForInfinitySlider();\n\n      return;\n    }\n\n    this.setState({ images, offset: 0, infinite: isInfinite });\n  };\n\n  render() {\n    const {\n      images,\n      itemWidth,\n      frameSize,\n      step,\n      offset,\n      animationDuration,\n      infinite,\n    } = this.state;\n\n    const imagesFromServer = this.props.images;\n\n    const widthContainer = itemWidth * frameSize;\n    const maxOffset = -((images.length - step) * itemWidth);\n\n    return (\n      <div\n        className=\"wrapper\"\n      >\n        <div className=\"Carousel\">\n          <div\n            className=\"Carousel__wrapper\"\n            style={{\n              width: `${widthContainer}px`,\n            }}\n          >\n            <CarouselList\n              images={images}\n              itemWidth={itemWidth}\n              style={{\n                transform: `translateX(${offset}px)`,\n                transition: `transform ${animationDuration}ms`,\n              }}\n            />\n          </div>\n          <div className=\"Carousel__buttons\">\n            <button\n              type=\"button\"\n              data-cy=\"prev\"\n              onClick={this.handlePrevClick}\n              disabled={!infinite && offset === 0}\n            >\n              Prev\n            </button>\n            <button\n              type=\"button\"\n              data-cy=\"next\"\n              onClick={this.handleNextClick}\n              disabled={!infinite && offset === maxOffset}\n            >\n              Next\n            </button>\n          </div>\n\n          <div className=\"Carousel__properties\">\n            <label htmlFor=\"itemId\">\n              Slider Item Width\n              <input\n                id=\"itemId\"\n                type=\"number\"\n                defaultValue={itemWidth}\n                onChange={\n                  (e) => this.setState({ itemWidth: +e.target.value })\n                }\n              />\n            </label>\n            <label htmlFor=\"frameId\">\n              Slides Per Frame\n              <input\n                id=\"frameId\"\n                type=\"number\"\n                min=\"1\"\n                max={images.length}\n                defaultValue={frameSize}\n                onChange={\n                  (e) => this.setState({\n                    frameSize: +e.target.value,\n                    images: imagesFromServer,\n                  })\n                }\n              />\n            </label>\n            <label htmlFor=\"stepId\">\n              Step\n              <input\n                id=\"stepId\"\n                type=\"number\"\n                defaultValue={step}\n                onChange={\n                  (e) => this.setState({ step: +e.target.value })\n                }\n              />\n            </label>\n            <label htmlFor=\"durationId\">\n              Animation Duration (in ms)\n              <input\n                id=\"durationId\"\n                type=\"number\"\n                defaultValue={animationDuration}\n                onChange={\n                  (e) => this.setState({ animationDuration: +e.target.value })\n                }\n              />\n            </label>\n\n            <label htmlFor=\"infiniteId\">\n              Infinite\n              <input\n                id=\"infiniteId\"\n                type=\"checkbox\"\n                defaultChecked={infinite}\n                onChange={\n                  // (e) => this.setState({ infinite: e.target.checked })\n                  (e) => this.updateSlidesList(e.target.checked)\n                }\n              />\n            </label>\n\n          </div>\n\n        </div>\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport './App.scss';\nimport { Carousel } from './components/Carousel/Carousel';\n\ninterface State {\n  images: string[];\n}\n\nclass App extends React.Component<{}, State> {\n  state = {\n    images: [\n      './img/1.png',\n      './img/2.png',\n      './img/3.png',\n      './img/4.png',\n      './img/5.png',\n      './img/6.png',\n      './img/7.png',\n      './img/8.png',\n      './img/9.png',\n      './img/10.png',\n    ],\n  };\n\n  render() {\n    const { images } = this.state;\n\n    return (\n      <div className=\"App\">\n        {/* eslint-disable-next-line */}\n        <h1 data-cy=\"title\">Carousel with {images.length} images</h1>\n\n        <Carousel\n          images={images}\n          step={3}\n          frameSize={3}\n          itemWidth={130}\n          animationDuration={1000}\n          infinite={false}\n        />\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}